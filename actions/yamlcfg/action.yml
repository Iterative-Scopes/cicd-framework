name: "Yaml configuration"
description: "read IS CI/CD yaml configuration"
inputs:
  is_env:
    description: "is environment"
    required: true
  mode:
    description: "action mode, build, deploy or test"
    required: false
    default: build

outputs:
  aws_account:
    description: "Output from the action"
    value: ${{ steps.get-settings.outputs.aws_account }}
  aws_role:
    description: "Output from the action"

runs:
  using: 'composite'
  steps:
    - name: Install Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.9'  

    #- name: Install Dependencies
    #  run: pip install -r requirements.txt
    #  shell: bash
    - name: pass Inputs to python script
      shell: bash
      run: |
        echo "IS_ENV=${{ inputs.is_env }}" >> $GITHUB_ENV
        echo "IS_MODE=${{ inputs.mode }}" >> $GITHUB_ENV

    - name: Fetch the number's square
      id: get-settings
      run: python "${{ github.action_path }}/main.py"
      shell: bash